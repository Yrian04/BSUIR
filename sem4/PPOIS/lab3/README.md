# Лабораторная работа 3

## Описание приложения

Pac-Man — аркадная видеоигра, разработанная японской компанией Namco и вышедшая в 1980 году. Задача игрока — управляя Пакманом, съесть все точки в лабиринте, избегая встречи с привидениями, которые гоняются за героем.

## Демонстрация работы

### Главное окно приложения

![изображение](https://github.com/Yrian04/PPOIS3/assets/90401055/c012e641-073b-40d0-9b42-fa72ff12a828)


Главное меню предлагает пользователю начать игру, посмотреть справку по игре, зайти в настройки, посмотреть таблицу рекордов либо же выйти.

### Справка

![изображение](https://github.com/Yrian04/PPOIS3/assets/90401055/79bfcb3f-ed0a-474b-ae3e-8a3cdb7d8b62)

Окно справки рассказывает правила игры.

### Таблица рекордов

![изображение](https://github.com/Yrian04/PPOIS3/assets/90401055/defd970d-892b-41e7-866f-e78987e05892)

В таблице рекордов отражены последние 5 лучших игр. По окончании игры игрока просят ввести имя для сохранения в таблице.

![изображение](https://github.com/Yrian04/PPOIS3/assets/90401055/f571e01b-5201-4582-8d48-c7a41abf683b)

### Геймплей

![изображение](https://github.com/Yrian04/PPOIS3/assets/90401055/3f45b538-3dc1-45b0-a1b6-50194e63fd9c)

Во время геймплея интерфейс отображает количество жизней, количество очков, а также спрайты поднятых фруктов в виде вишенок.

## Архитектура приложения

### Общие характеристики

В приложении используется библиотека pygame, в частности для отображения графики и для создания звуковых эффектов.
Приложение разработано с использованием паттерна MVC с активной моделью.

На слое model содержатся все игровые сущности и непосредственно модель игры со всей бизнес-логикой.
Controller отвечает за связь уровней и пользователя. Там обрабатываются события ввода.
View отвечает строго за отрисовку при поступлении event'ов с других слоев.

Для удобства коммуникации между слоями реализован класс EventManager, представляющий собой реализацию паттерна event bus.

Приложение как совокупность интерфейса и непосредственно игры представляет из собой стековую машину состояний.
За этот функционал отвечает класс StateMachine.

### Игра

Игра представляет из себя обработку логики над узлами. Для представления последних создан класс Node с методом position, позволяющим узнать 
позицию узла.
От Node унаследованы Wall, Road, Crossroad, Cookie, Poweup, Haste, Fruit, а также GameObject. GameObject представляет
из себя суперкласс для движущихся объектов на карте и имеет в себе такие методы, как move() и collision(). От GameObject
унаследованы Pacman и Ghost.

Визуальная часть игры представлена спрайтами. Они хранятся в папке resources, как и аудио-файлы для звуковых эффектов и фоновой музыки.

Часть логики реализована с помощью callback функций. Таким образом обеспечивается слабое зацепление классов: объекты не знают о спрайтах, при этом способны при своем уничтожении удалять свой спрайт.
